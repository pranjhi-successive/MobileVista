"use strict";(self.webpackChunkmobile_app=self.webpackChunkmobile_app||[]).push([[669],{3396:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(2791),r=a(2690),o=a(4932),c=a(3974),l=a(184);const i=e=>{const{sessionId:t}=e,[a,r]=(0,s.useState)(1),[i,n]=(0,s.useState)(6),[d,h]=(0,s.useState)([]),[u,p]=(0,s.useState)(!0);(0,s.useEffect)((()=>{(async()=>{console.log("id",t);try{const e=await c.Z.get("/up/bulk-errors/".concat(t,"?page=").concat(a,"&limit=").concat(i));h(e.data.data),console.log(e.data.data),p(!1)}catch(e){console.error("Error fetching data:",e)}})()}),[t]);return(0,l.jsx)("div",{children:(0,l.jsx)("div",{children:u?(0,l.jsx)(o.yC,{tip:"Loading..."}):(0,l.jsx)(o.iA,{onChange:(e,t)=>{r(e),n(t)},dataSource:d,columns:[{title:"Error Details",dataIndex:"errorDetails",key:"errorDetails"}],rowKey:e=>e.rowNumber,show:!0})})})};var n=a(4215);const d=e=>{const{fetchHistory:t,setFetchHistory:a}=e,[r,d]=(0,s.useState)([]),[h,u]=(0,s.useState)(!0),[p,x]=(0,s.useState)(""),[f,v]=(0,s.useState)(!1),[m,j]=(0,s.useState)("right"),g=()=>{v(!1)};return(0,s.useEffect)((()=>{console.log("In fetch history"),t&&(async()=>{console.log("In fetch response",h);try{const e=await c.Z.get("/up/bulk-uploads-list");Array.isArray(e.data)?d(e.data):console.error("Invalid data format:",e.data)}catch(e){console.log("Some error in fetching bulk upload details",e)}finally{u(!1),a(!1)}})()}),[t]),(0,l.jsxs)("div",{className:"bulk-upload-container",children:[(0,l.jsx)("h1",{children:"Upload History"}),(0,l.jsxs)(o.FX,{value:m,onChange:e=>{j(e.target.value)},children:[(0,l.jsx)(o.Y8,{value:"top",children:"top"}),(0,l.jsx)(o.Y8,{value:"right",children:"right"}),(0,l.jsx)(o.Y8,{value:"bottom",children:"bottom"}),(0,l.jsx)(o.Y8,{value:"left",children:"left"})]}),(0,l.jsx)(o.aV,{dataSource:r,pagination:{showSizeChanger:!0,position:"top",pageSize:6},renderItem:e=>(0,l.jsxs)(o.HC,{children:[(0,l.jsxs)("div",{className:"record-details",children:[(0,l.jsxs)("div",{children:["Total: ",e.totalEntries]}),(0,l.jsxs)("div",{children:["File Name: ",e.fileName]}),(0,l.jsxs)("div",{children:["Success: ",e.totalEntries-e.totalErrors]}),(0,l.jsxs)("div",{children:["Errors: ",e.totalErrors]}),(0,l.jsxs)("div",{children:["Time Taken: ",e.timeTaken]}),(0,l.jsxs)("div",{children:["Uploaded At: ",new Date(e.createdAt).toLocaleString()]}),(0,l.jsxs)("div",{children:["Session Id: ",e.session_id]})]}),(0,l.jsx)("div",{className:"view-errors",children:(0,l.jsxs)(o.zx,{type:"primary",onClick:()=>{return t=e.session_id,x(t),void v(!0);var t},children:[(0,l.jsx)(n.Z,{className:"action-icon"}),"View Errors"]})})]})}),(0,l.jsx)(o.dy,{title:"Errors",placement:m,width:500,onClose:g,open:f,extra:(0,l.jsxs)(o.T,{children:[(0,l.jsx)(o.zx,{onClick:g,children:"Cancel"}),(0,l.jsx)(o.zx,{type:"primary",onClick:g,children:"OK"})]}),children:(0,l.jsx)(i,{sessionId:p})})]})};var h=a(7462);const u={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};var p=a(4291),x=function(e,t){return s.createElement(p.Z,(0,h.Z)({},e,{ref:t,icon:u}))};const f=s.forwardRef(x),v=()=>{const[e,t]=(0,s.useState)([]),[a,c]=(0,s.useState)(!0),i={customRequest:e=>{let{onSuccess:t,onError:a,file:s}=e;(async e=>{try{const t=new FormData;t.append("file",e),(await fetch("http://localhost:4000/up/bulk-upload",{method:"POST",body:t})).ok?r.ZP.success("".concat(e.name," uploaded successfully")):r.ZP.error("".concat(e.name," upload failed."))}catch(t){r.ZP.error("File upload failed.")}})(s).then((()=>t())).catch((e=>{console.error("Error uploading file:",e),a(e)}))},onChange(e){c(!0),t(e.fileList)},onRemove(a){(a=>{const s=e.filter((e=>e.uid!==a.uid));t(s)})(a)},accept:".csv",listType:"picture",progress:{strokeColor:{"0%":"#108ee9","100%":"#87d068"},format:e=>e&&"".concat(parseFloat(e.toFixed(1)),"%"),style:{width:"97%"}}};return(0,l.jsxs)("div",{style:{padding:"0 24px",minHeight:880},children:[(0,l.jsx)(o.bw,{"data-testid":"file-input",...i,fileList:e,showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0},children:(0,l.jsxs)("div",{className:"dragger-container",children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon",children:(0,l.jsx)(f,{})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),(0,l.jsx)("div",{children:(0,l.jsx)(d,{fetchHistory:a,setFetchHistory:c})})]})}},2621:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(7462),r=a(2791);const o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};var c=a(4291),l=function(e,t){return r.createElement(c.Z,(0,s.Z)({},e,{ref:t,icon:o}))};const i=r.forwardRef(l)},8782:(e,t,a)=>{a.d(t,{G8:()=>o,ln:()=>c});var s=a(2791);a(632);function r(){}const o=s.createContext({}),c=()=>{const e=()=>{};return e.deprecated=r,e}}}]);
//# sourceMappingURL=669.8d74f44d.chunk.js.map