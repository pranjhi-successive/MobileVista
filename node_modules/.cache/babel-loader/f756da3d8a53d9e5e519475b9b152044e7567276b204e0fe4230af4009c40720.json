{"ast":null,"code":"import{Input,Typography,message}from\"antd\";import axios from\"axios\";import React,{useContext,useEffect}from\"react\";import{Navigate,useNavigate}from\"react-router-dom\";import\"./Login.css\";import{DashboardContext}from\"../../Dashboard/DashContext\";import{AuthenticationContext}from\"../Authentication/Context\";import{Button,Form,FormItem,InputPassword}from\"../../../components\";import{LockOutlined,MailOutlined}from\"../../../components/Icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const{Text,Link}=Typography;const Login=()=>{const navigate=useNavigate();const[messageApi,contextHolder]=message.useMessage();const{isAuthenticated}=useContext(AuthenticationContext);const{setDashboardSelectedItem}=useContext(DashboardContext);const displayMessage=(messageType,data)=>{messageApi.open({type:messageType,content:data===null||data===void 0?void 0:data.message});};const onFinish=async values=>{console.log(\"Received values of form: \",values);const options={method:\"POST\",url:\"http://localhost:4000/auth/login\",data:values};try{const response=await axios.request(options);localStorage.setItem(\"token\",response.data.token);console.log(response.data.token);displayMessage(\"success\",{message:\"Login Successful\"});setDashboardSelectedItem(\"Mobiles\");window.location.reload();navigate(\"/dashboard\");}catch(error){displayMessage(\"error\",{message:\"Invalid credentials\"});}};useEffect(()=>{setDashboardSelectedItem(\"Mobiles\");},[]);if(isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}return/*#__PURE__*/_jsxs(_Fragment,{children:[contextHolder,/*#__PURE__*/_jsx(\"section\",{className:\"bg-img\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"header\",{children:\"Sign in\"}),/*#__PURE__*/_jsxs(Form,{name:\"login\",\"aria-label\":\"login form\",onFinish:onFinish,layout:\"vertical\",requiredMark:\"optional\",children:[/*#__PURE__*/_jsx(FormItem,{name:\"email\",label:\"Email\",rules:[{type:\"email\",required:true,message:\"Please input your Name!\"}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(MailOutlined,{}),placeholder:\"Email\"})}),/*#__PURE__*/_jsx(FormItem,{name:\"password\",label:\"Password\",rules:[{required:true,message:\"Please input your Password!\"}],children:/*#__PURE__*/_jsx(InputPassword,{prefix:/*#__PURE__*/_jsx(LockOutlined,{}),type:\"password\",placeholder:\"Password\"})}),/*#__PURE__*/_jsxs(FormItem,{style:{marginBottom:\"0px\"},children:[/*#__PURE__*/_jsx(Button,{block:\"true\",type:\"primary\",htmlType:\"submit\",children:\"Log in\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{children:\"Don't have an account?\"}),\" \",/*#__PURE__*/_jsx(Link,{href:\"/register\",children:\"Sign up now\"})]})]})]})]})})]});};export default Login;","map":{"version":3,"names":["Input","Typography","message","axios","React","useContext","useEffect","Navigate","useNavigate","DashboardContext","AuthenticationContext","Button","Form","FormItem","InputPassword","LockOutlined","MailOutlined","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Text","Link","Login","navigate","messageApi","contextHolder","useMessage","isAuthenticated","setDashboardSelectedItem","displayMessage","messageType","data","open","type","content","onFinish","values","console","log","options","method","url","response","request","localStorage","setItem","token","window","location","reload","error","to","replace","children","className","name","layout","requiredMark","label","rules","required","prefix","placeholder","style","marginBottom","block","htmlType","href"],"sources":["/home/pranjhi.singh/Desktop/MobileVista/mobile-app/src/modules/User/LoginPage/Login.jsx"],"sourcesContent":["import {  Input, Typography, message } from \"antd\";\nimport axios from \"axios\";\nimport React, { useContext, useEffect } from \"react\";\nimport { Navigate, useNavigate } from \"react-router-dom\";\nimport \"./Login.css\";\nimport { DashboardContext } from \"../../Dashboard/DashContext\";\nimport { AuthenticationContext } from \"../Authentication/Context\";\nimport { Button,Form, FormItem, InputPassword } from \"../../../components\";\nimport { LockOutlined, MailOutlined } from \"../../../components/Icons\";\nconst { Text, Link } = Typography;\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const [messageApi, contextHolder] = message.useMessage();\n  const { isAuthenticated } = useContext(AuthenticationContext);\n\n  const { setDashboardSelectedItem } = useContext(DashboardContext);\n\n  const displayMessage = (messageType, data) => {\n    messageApi.open({\n      type: messageType,\n      content: data?.message,\n    });\n  };\n\n  const onFinish = async (values) => {\n    console.log(\"Received values of form: \", values);\n\n    const options = {\n      method: \"POST\",\n      url: \"http://localhost:4000/auth/login\",\n      data: values,\n    };\n\n    try {\n      const response = await axios.request(options);\n      localStorage.setItem(\"token\", response.data.token);\n      console.log(response.data.token);\n\n      displayMessage(\"success\", { message: \"Login Successful\" });\n      setDashboardSelectedItem(\"Mobiles\");\n      window.location.reload();\n      navigate(\"/dashboard\");\n    } catch (error) {\n      displayMessage(\"error\", { message: \"Invalid credentials\" });\n    }\n  };\n\n  useEffect(() => {\n    setDashboardSelectedItem(\"Mobiles\");\n  }, []);\n  if (isAuthenticated) {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n  return (\n    <>\n      {contextHolder}\n      <section className=\"bg-img\">\n        <div className=\"content\">\n          <header>Sign in</header>\n          <Form\n            name=\"login\"\n            aria-label=\"login form\"\n            onFinish={onFinish}\n            layout=\"vertical\"\n            requiredMark=\"optional\"\n          >\n            <FormItem\n              name=\"email\"\n              label=\"Email\"\n              rules={[\n                {\n                  type: \"email\",\n                  required: true,\n                  message: \"Please input your Name!\",\n                },\n              ]}\n            >\n              <Input prefix={<MailOutlined />} placeholder=\"Email\" />\n            </FormItem>\n            <FormItem\n              name=\"password\"\n              label=\"Password\"\n              rules={[\n                {\n                  required: true,\n                  message: \"Please input your Password!\",\n                },\n              ]}\n            >\n              <InputPassword\n                prefix={<LockOutlined />}\n                type=\"password\"\n                placeholder=\"Password\"\n              />\n            </FormItem>\n\n            <FormItem style={{ marginBottom: \"0px\" }}>\n              <Button block=\"true\" type=\"primary\" htmlType=\"submit\">\n                Log in\n              </Button>\n              <div>\n                <Text>Don't have an account?</Text>{\" \"}\n                <Link href=\"/register\">Sign up now</Link>\n              </div>\n            </FormItem>\n          </Form>\n        </div>\n      </section>\n    </>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}