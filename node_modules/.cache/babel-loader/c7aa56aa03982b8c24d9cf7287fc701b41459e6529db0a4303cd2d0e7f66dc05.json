{"ast":null,"code":"import{Typography,message}from\"antd\";import axios from\"axios\";import React,{useContext,useEffect}from\"react\";import{Navigate,useNavigate}from\"react-router-dom\";import\"./Login.css\";import{DashboardContext}from\"../../../Dashboard/DashContext\";import{AuthenticationContext}from\"../Authentication/Context\";import{Button,Form,Input}from\"../../../../components\";import{LockOutlined,MailOutlined}from\"../../../../components/Icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const{Text,Link}=Typography;const Login=()=>{const navigate=useNavigate();const[messageApi,contextHolder]=message.useMessage();const{isAuthenticated}=useContext(AuthenticationContext);const{setDashboardSelectedItem}=useContext(DashboardContext);const displayMessage=(messageType,data)=>{messageApi.open({type:messageType,content:data===null||data===void 0?void 0:data.message});};const onFinish=async values=>{console.log(\"Received values of form: \",values);const options={method:\"POST\",url:\"http://localhost:4000/auth/login\",data:values};try{const response=await axios.request(options);localStorage.setItem(\"token\",response.data.token);console.log(response.data.token);displayMessage(\"success\",{message:\"Login Successful\"});setDashboardSelectedItem(\"Mobiles\");window.location.reload();navigate(\"/dashboard\");}catch(error){displayMessage(\"error\",{message:\"Invalid credentials\"});}};useEffect(()=>{setDashboardSelectedItem(\"Mobiles\");},[]);if(isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}return/*#__PURE__*/_jsxs(_Fragment,{children:[contextHolder,/*#__PURE__*/_jsx(\"section\",{className:\"bg-img\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"header\",{children:\"Sign in\"}),/*#__PURE__*/_jsxs(Form,{name:\"login\",\"aria-label\":\"login form\",onFinish:onFinish,layout:\"vertical\",requiredMark:\"optional\",children:[/*#__PURE__*/_jsx(Form.Item,{name:\"email\",label:\"Email\",rules:[{type:\"email\",required:true,message:\"Please input your Name!\"}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(MailOutlined,{}),placeholder:\"Email\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",label:\"Password\",rules:[{required:true,message:\"Please input your Password!\"}],children:/*#__PURE__*/_jsx(Input.Password,{prefix:/*#__PURE__*/_jsx(LockOutlined,{}),type:\"password\",placeholder:\"Password\"})}),/*#__PURE__*/_jsxs(Form.Item,{style:{marginBottom:\"0px\"},children:[/*#__PURE__*/_jsx(Button,{block:\"true\",type:\"primary\",htmlType:\"submit\",children:\"Log in\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{children:\"Don't have an account?\"}),\" \",/*#__PURE__*/_jsx(Link,{href:\"/register\",children:\"Sign up now\"})]})]})]})]})})]});};export default Login;","map":{"version":3,"names":["Typography","message","axios","React","useContext","useEffect","Navigate","useNavigate","DashboardContext","AuthenticationContext","Button","Form","Input","LockOutlined","MailOutlined","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Text","Link","Login","navigate","messageApi","contextHolder","useMessage","isAuthenticated","setDashboardSelectedItem","displayMessage","messageType","data","open","type","content","onFinish","values","console","log","options","method","url","response","request","localStorage","setItem","token","window","location","reload","error","to","replace","children","className","name","layout","requiredMark","Item","label","rules","required","prefix","placeholder","Password","style","marginBottom","block","htmlType","href"],"sources":["/home/pranjhi.singh/Desktop/MobileVista/mobile-app/src/modules/mobiles/User/LoginPage/Login.jsx"],"sourcesContent":["import { Typography, message } from \"antd\";\nimport axios from \"axios\";\nimport React, { useContext, useEffect } from \"react\";\nimport { Navigate, useNavigate } from \"react-router-dom\";\nimport \"./Login.css\";\nimport { DashboardContext } from \"../../../Dashboard/DashContext\";\nimport { AuthenticationContext } from \"../Authentication/Context\";\nimport { Button, Form, Input } from \"../../../../components\";\nimport { LockOutlined, MailOutlined } from \"../../../../components/Icons\";\nconst { Text, Link } = Typography;\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const [messageApi, contextHolder] = message.useMessage();\n  const { isAuthenticated } = useContext(AuthenticationContext);\n\n  const { setDashboardSelectedItem } = useContext(DashboardContext);\n\n  const displayMessage = (messageType, data) => {\n    messageApi.open({\n      type: messageType,\n      content: data?.message,\n    });\n  };\n\n  const onFinish = async (values) => {\n    console.log(\"Received values of form: \", values);\n\n    const options = {\n      method: \"POST\",\n      url: \"http://localhost:4000/auth/login\",\n      data: values,\n    };\n\n    try {\n      const response = await axios.request(options);\n      localStorage.setItem(\"token\", response.data.token);\n      console.log(response.data.token);\n\n      displayMessage(\"success\", { message: \"Login Successful\" });\n      setDashboardSelectedItem(\"Mobiles\");\n      window.location.reload();\n      navigate(\"/dashboard\");\n    } catch (error) {\n      displayMessage(\"error\", { message: \"Invalid credentials\" });\n    }\n  };\n\n  useEffect(() => {\n    setDashboardSelectedItem(\"Mobiles\");\n  }, []);\n  if (isAuthenticated) {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n  return (\n    <>\n      {contextHolder}\n      <section className=\"bg-img\">\n        <div className=\"content\">\n          <header>Sign in</header>\n          <Form\n            name=\"login\"\n            aria-label=\"login form\"\n            onFinish={onFinish}\n            layout=\"vertical\"\n            requiredMark=\"optional\"\n          >\n            <Form.Item\n              name=\"email\"\n              label=\"Email\"\n              rules={[\n                {\n                  type: \"email\",\n                  required: true,\n                  message: \"Please input your Name!\",\n                },\n              ]}\n            >\n              <Input prefix={<MailOutlined />} placeholder=\"Email\" />\n            </Form.Item>\n            <Form.Item\n              name=\"password\"\n              label=\"Password\"\n              rules={[\n                {\n                  required: true,\n                  message: \"Please input your Password!\",\n                },\n              ]}\n            >\n              <Input.Password\n                prefix={<LockOutlined />}\n                type=\"password\"\n                placeholder=\"Password\"\n              />\n            </Form.Item>\n\n            <Form.Item style={{ marginBottom: \"0px\" }}>\n              <Button block=\"true\" type=\"primary\" htmlType=\"submit\">\n                Log in\n              </Button>\n              <div>\n                <Text>Don't have an account?</Text>{\" \"}\n                <Link href=\"/register\">Sign up now</Link>\n              </div>\n            </Form.Item>\n          </Form>\n        </div>\n      </section>\n    </>\n  );\n};\n\nexport default Login;\n"],"mappings":"AAAA,OAASA,UAAU,CAAEC,OAAO,KAAQ,MAAM,CAC1C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CACpD,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,MAAO,aAAa,CACpB,OAASC,gBAAgB,KAAQ,gCAAgC,CACjE,OAASC,qBAAqB,KAAQ,2BAA2B,CACjE,OAASC,MAAM,CAAEC,IAAI,CAAEC,KAAK,KAAQ,wBAAwB,CAC5D,OAASC,YAAY,CAAEC,YAAY,KAAQ,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAC1E,KAAM,CAAEC,IAAI,CAAEC,IAAK,CAAC,CAAGtB,UAAU,CAEjC,KAAM,CAAAuB,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAAAC,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACkB,UAAU,CAAEC,aAAa,CAAC,CAAGzB,OAAO,CAAC0B,UAAU,CAAC,CAAC,CACxD,KAAM,CAAEC,eAAgB,CAAC,CAAGxB,UAAU,CAACK,qBAAqB,CAAC,CAE7D,KAAM,CAAEoB,wBAAyB,CAAC,CAAGzB,UAAU,CAACI,gBAAgB,CAAC,CAEjE,KAAM,CAAAsB,cAAc,CAAGA,CAACC,WAAW,CAAEC,IAAI,GAAK,CAC5CP,UAAU,CAACQ,IAAI,CAAC,CACdC,IAAI,CAAEH,WAAW,CACjBI,OAAO,CAAEH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE/B,OACjB,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAmC,QAAQ,CAAG,KAAO,CAAAC,MAAM,EAAK,CACjCC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEF,MAAM,CAAC,CAEhD,KAAM,CAAAG,OAAO,CAAG,CACdC,MAAM,CAAE,MAAM,CACdC,GAAG,CAAE,kCAAkC,CACvCV,IAAI,CAAEK,MACR,CAAC,CAED,GAAI,CACF,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAAzC,KAAK,CAAC0C,OAAO,CAACJ,OAAO,CAAC,CAC7CK,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEH,QAAQ,CAACX,IAAI,CAACe,KAAK,CAAC,CAClDT,OAAO,CAACC,GAAG,CAACI,QAAQ,CAACX,IAAI,CAACe,KAAK,CAAC,CAEhCjB,cAAc,CAAC,SAAS,CAAE,CAAE7B,OAAO,CAAE,kBAAmB,CAAC,CAAC,CAC1D4B,wBAAwB,CAAC,SAAS,CAAC,CACnCmB,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CACxB1B,QAAQ,CAAC,YAAY,CAAC,CACxB,CAAE,MAAO2B,KAAK,CAAE,CACdrB,cAAc,CAAC,OAAO,CAAE,CAAE7B,OAAO,CAAE,qBAAsB,CAAC,CAAC,CAC7D,CACF,CAAC,CAEDI,SAAS,CAAC,IAAM,CACdwB,wBAAwB,CAAC,SAAS,CAAC,CACrC,CAAC,CAAE,EAAE,CAAC,CACN,GAAID,eAAe,CAAE,CACnB,mBAAOZ,IAAA,CAACV,QAAQ,EAAC8C,EAAE,CAAC,YAAY,CAACC,OAAO,MAAE,CAAC,CAC7C,CACA,mBACEnC,KAAA,CAAAE,SAAA,EAAAkC,QAAA,EACG5B,aAAa,cACdV,IAAA,YAASuC,SAAS,CAAC,QAAQ,CAAAD,QAAA,cACzBpC,KAAA,QAAKqC,SAAS,CAAC,SAAS,CAAAD,QAAA,eACtBtC,IAAA,WAAAsC,QAAA,CAAQ,SAAO,CAAQ,CAAC,cACxBpC,KAAA,CAACP,IAAI,EACH6C,IAAI,CAAC,OAAO,CACZ,aAAW,YAAY,CACvBpB,QAAQ,CAAEA,QAAS,CACnBqB,MAAM,CAAC,UAAU,CACjBC,YAAY,CAAC,UAAU,CAAAJ,QAAA,eAEvBtC,IAAA,CAACL,IAAI,CAACgD,IAAI,EACRH,IAAI,CAAC,OAAO,CACZI,KAAK,CAAC,OAAO,CACbC,KAAK,CAAE,CACL,CACE3B,IAAI,CAAE,OAAO,CACb4B,QAAQ,CAAE,IAAI,CACd7D,OAAO,CAAE,yBACX,CAAC,CACD,CAAAqD,QAAA,cAEFtC,IAAA,CAACJ,KAAK,EAACmD,MAAM,cAAE/C,IAAA,CAACF,YAAY,GAAE,CAAE,CAACkD,WAAW,CAAC,OAAO,CAAE,CAAC,CAC9C,CAAC,cACZhD,IAAA,CAACL,IAAI,CAACgD,IAAI,EACRH,IAAI,CAAC,UAAU,CACfI,KAAK,CAAC,UAAU,CAChBC,KAAK,CAAE,CACL,CACEC,QAAQ,CAAE,IAAI,CACd7D,OAAO,CAAE,6BACX,CAAC,CACD,CAAAqD,QAAA,cAEFtC,IAAA,CAACJ,KAAK,CAACqD,QAAQ,EACbF,MAAM,cAAE/C,IAAA,CAACH,YAAY,GAAE,CAAE,CACzBqB,IAAI,CAAC,UAAU,CACf8B,WAAW,CAAC,UAAU,CACvB,CAAC,CACO,CAAC,cAEZ9C,KAAA,CAACP,IAAI,CAACgD,IAAI,EAACO,KAAK,CAAE,CAAEC,YAAY,CAAE,KAAM,CAAE,CAAAb,QAAA,eACxCtC,IAAA,CAACN,MAAM,EAAC0D,KAAK,CAAC,MAAM,CAAClC,IAAI,CAAC,SAAS,CAACmC,QAAQ,CAAC,QAAQ,CAAAf,QAAA,CAAC,QAEtD,CAAQ,CAAC,cACTpC,KAAA,QAAAoC,QAAA,eACEtC,IAAA,CAACK,IAAI,EAAAiC,QAAA,CAAC,wBAAsB,CAAM,CAAC,CAAC,GAAG,cACvCtC,IAAA,CAACM,IAAI,EAACgD,IAAI,CAAC,WAAW,CAAAhB,QAAA,CAAC,aAAW,CAAM,CAAC,EACtC,CAAC,EACG,CAAC,EACR,CAAC,EACJ,CAAC,CACC,CAAC,EACV,CAAC,CAEP,CAAC,CAED,cAAe,CAAA/B,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}