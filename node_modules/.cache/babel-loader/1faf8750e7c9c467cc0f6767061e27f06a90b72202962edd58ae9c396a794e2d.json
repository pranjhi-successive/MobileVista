{"ast":null,"code":"import axios from\"axios\";import React,{useEffect,useState}from\"react\";import ErrorDetail from\"./ErrorDetail\";import{Button,Drawer,List,ListItem,Radio,RadioGroup,Space}from\"../../../components\";import{EyeOutlined}from\"../../../components/Icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const BulkUploadList=props=>{const{fetchHistory,setFetchHistory}=props;const[bulkUploads,setBulkUploads]=useState([]);const[loading,setLoading]=useState(true);const[drawerItemId,setDrawerItemId]=useState(\"\");const fetchApiResponse=async()=>{console.log(\"In fetch response\",loading);try{const apiResponse=await axios.get(\"http://localhost:4000/up/bulk-uploads-list\");if(Array.isArray(apiResponse.data)){setBulkUploads(apiResponse.data);}else{console.error(\"Invalid data format:\",apiResponse.data);}}catch(error){console.log(\"Some error in fetching bulk upload details\",error);}finally{setLoading(false);setFetchHistory(false);}};const[open,setOpen]=useState(false);const[placement,setPlacement]=useState(\"right\");const showDrawer=id=>{setDrawerItemId(id);setOpen(true);};const onChange=e=>{setPlacement(e.target.value);};const onClose=()=>{setOpen(false);};useEffect(()=>{console.log(\"In fetch history\");if(fetchHistory){fetchApiResponse();}},[fetchHistory]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bulk-upload-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Upload History\"}),/*#__PURE__*/_jsxs(RadioGroup,{value:placement,onChange:onChange,children:[/*#__PURE__*/_jsx(Radio,{value:\"top\",children:\"top\"}),/*#__PURE__*/_jsx(Radio,{value:\"right\",children:\"right\"}),/*#__PURE__*/_jsx(Radio,{value:\"bottom\",children:\"bottom\"}),/*#__PURE__*/_jsx(Radio,{value:\"left\",children:\"left\"})]}),/*#__PURE__*/_jsx(List,{dataSource:bulkUploads,pagination:{showSizeChanger:true,position:\"top\",pageSize:6},renderItem:item=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"record-details\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Total: \",item.totalEntries]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"File Name: \",item.fileName]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Success: \",item.totalEntries-item.totalErrors]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Errors: \",item.totalErrors]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Time Taken: \",item.timeTaken]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Uploaded At: \",new Date(item.createdAt).toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Session Id: \",item.session_id]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"view-errors\",children:/*#__PURE__*/_jsxs(Button,{type:\"primary\",onClick:()=>showDrawer(item.session_id),children:[/*#__PURE__*/_jsx(EyeOutlined,{className:\"action-icon\"}),\"View Errors\"]})})]})}),/*#__PURE__*/_jsx(Drawer,{title:\"Errors\",placement:placement,width:500,onClose:onClose,open:open,extra:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:onClose,children:\"OK\"})]}),children:/*#__PURE__*/_jsx(ErrorDetail,{sessionId:drawerItemId})})]});};export default BulkUploadList;","map":{"version":3,"names":["axios","React","useEffect","useState","ErrorDetail","Button","Drawer","List","ListItem","Radio","RadioGroup","Space","EyeOutlined","jsx","_jsx","jsxs","_jsxs","BulkUploadList","props","fetchHistory","setFetchHistory","bulkUploads","setBulkUploads","loading","setLoading","drawerItemId","setDrawerItemId","fetchApiResponse","console","log","apiResponse","get","Array","isArray","data","error","open","setOpen","placement","setPlacement","showDrawer","id","onChange","e","target","value","onClose","className","children","dataSource","pagination","showSizeChanger","position","pageSize","renderItem","item","totalEntries","fileName","totalErrors","timeTaken","Date","createdAt","toLocaleString","session_id","type","onClick","title","width","extra","sessionId"],"sources":["/home/pranjhi.singh/Desktop/MobileVista/mobile-app/src/modules/mobiles/Uploads/history.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport ErrorDetail from \"./ErrorDetail\";\nimport { Button, Drawer, List, ListItem, Radio, RadioGroup, Space } from \"../../../components\";\nimport { EyeOutlined } from \"../../../components/Icons\";\n\nconst BulkUploadList = (props) => {\n  const { fetchHistory, setFetchHistory } = props;\n\n  const [bulkUploads, setBulkUploads] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [drawerItemId, setDrawerItemId] = useState(\"\");\n  const fetchApiResponse = async () => {\n    console.log(\"In fetch response\", loading);\n    try {\n      const apiResponse = await axios.get(\n        `http://localhost:4000/up/bulk-uploads-list`\n      );\n\n      if (Array.isArray(apiResponse.data)) {\n        setBulkUploads(apiResponse.data);\n      } else {\n        console.error(\"Invalid data format:\", apiResponse.data);\n      }\n    } catch (error) {\n      console.log(\"Some error in fetching bulk upload details\", error);\n    } finally {\n      setLoading(false);\n      setFetchHistory(false);\n    }\n  };\n\n  const [open, setOpen] = useState(false);\n  const [placement, setPlacement] = useState(\"right\");\n  const showDrawer = (id) => {\n    setDrawerItemId(id);\n    setOpen(true);\n  };\n  const onChange = (e) => {\n    setPlacement(e.target.value);\n  };\n  const onClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    console.log(\"In fetch history\");\n    if (fetchHistory) {\n      fetchApiResponse();\n    }\n  }, [fetchHistory]);\n  return (\n    <div className=\"bulk-upload-container\">\n      <h1>Upload History</h1>\n      <RadioGroup value={placement} onChange={onChange}>\n        <Radio value=\"top\">top</Radio>\n        <Radio value=\"right\">right</Radio>\n        <Radio value=\"bottom\">bottom</Radio>\n        <Radio value=\"left\">left</Radio>\n      </RadioGroup>\n\n      <List\n        dataSource={bulkUploads}\n        pagination={{\n          showSizeChanger: true,\n          position: \"top\",\n          pageSize: 6,\n        }}\n        renderItem={(item) => (\n          <ListItem>\n            <div className=\"record-details\">\n              <div>Total: {item.totalEntries}</div>\n              <div>File Name: {item.fileName}</div>\n              <div>Success: {item.totalEntries - item.totalErrors}</div>\n              <div>Errors: {item.totalErrors}</div>\n              <div>Time Taken: {item.timeTaken}</div>\n              <div>\n                Uploaded At: {new Date(item.createdAt).toLocaleString()}\n              </div>\n              <div>Session Id: {item.session_id}</div>\n            </div>\n            <div className=\"view-errors\">\n              <Button\n                type=\"primary\"\n                onClick={() => showDrawer(item.session_id)}\n              >\n                <EyeOutlined className=\"action-icon\" />\n                View Errors\n              </Button>\n            </div>\n          </ListItem>\n        )}\n      />\n      <Drawer\n        title=\"Errors\"\n        placement={placement}\n        width={500}\n        onClose={onClose}\n        open={open}\n        extra={\n          <Space>\n            <Button onClick={onClose}>Cancel</Button>\n            <Button type=\"primary\" onClick={onClose}>\n              OK\n            </Button>\n          </Space>\n        }\n      >\n        <ErrorDetail sessionId={drawerItemId} />\n      </Drawer>\n    </div>\n  );\n};\n\nexport default BulkUploadList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}