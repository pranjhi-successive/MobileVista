{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import{AuthenticationContext}from\"../../modules/User/Authentication/Context\";import axios from\"axios\";import{Navigate}from\"react-router-dom\";const PublicRoute=_ref=>{let{children}=_ref;const{setIsAuthenticated}=useContext(AuthenticationContext);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const getUser=async()=>{try{await axios.get(\"http://localhost:4000/user/token\",{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});setIsAuthenticated(true);}catch(error){localStorage.clear();setIsAuthenticated(false);}finally{setIsLoading(false);}};getUser();},[]);return children;};export default PublicRoute;","map":{"version":3,"names":["useContext","useEffect","useState","AuthenticationContext","axios","Navigate","PublicRoute","_ref","children","setIsAuthenticated","isLoading","setIsLoading","getUser","get","headers","Authorization","concat","localStorage","getItem","error","clear"],"sources":["/home/pranjhi.singh/Desktop/MobileVista/mobile-app/src/Routes/authRoutes/publicRoutes.jsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { AuthenticationContext } from \"../../modules/User/Authentication/Context\";\n\nimport axios from \"axios\";\nimport { Navigate } from \"react-router-dom\";\n\nconst PublicRoute = ({ children }) => {\n  const { setIsAuthenticated} = useContext(AuthenticationContext);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const getUser = async () => {\n      try {\n        await axios.get(\"http://localhost:4000/user/token\", {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        });\n\n        setIsAuthenticated(true);\n      } catch (error) {\n        localStorage.clear();\n        setIsAuthenticated(false);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    getUser();\n  }, []);\n\n  \n    return children;\n \n};\nexport default PublicRoute;\n"],"mappings":"AAAA,OAASA,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACvD,OAASC,qBAAqB,KAAQ,2CAA2C,CAEjF,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAE3C,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC/B,KAAM,CAAEE,kBAAkB,CAAC,CAAGT,UAAU,CAACG,qBAAqB,CAAC,CAC/D,KAAM,CAACO,SAAS,CAAEC,YAAY,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAEhDD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,OAAO,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACF,KAAM,CAAAR,KAAK,CAACS,GAAG,CAAC,kCAAkC,CAAE,CAClDC,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxD,CACF,CAAC,CAAC,CAEFT,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAE,MAAOU,KAAK,CAAE,CACdF,YAAY,CAACG,KAAK,CAAC,CAAC,CACpBX,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAC,OAAS,CACRE,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAEDC,OAAO,CAAC,CAAC,CACX,CAAC,CAAE,EAAE,CAAC,CAGJ,MAAO,CAAAJ,QAAQ,CAEnB,CAAC,CACD,cAAe,CAAAF,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}