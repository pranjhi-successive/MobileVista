{"ast":null,"code":"import{LockOutlined,MailOutlined}from\"@ant-design/icons\";import{Button,Form,Input,Typography,message}from\"antd\";import axios from\"axios\";import React,{useContext,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import'./Login.css';import{DashboardContext}from\"../../Dashboard/dashContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const{Text,Link}=Typography;const Login=()=>{const navigate=useNavigate();const[messageApi,contextHolder]=message.useMessage();const{setDashboardSelectedItem}=useContext(DashboardContext);const displayMessage=(messageType,data)=>{messageApi.open({type:messageType,content:data===null||data===void 0?void 0:data.message});};const onFinish=async values=>{console.log(\"Received values of form: \",values);const options={method:\"POST\",url:\"http://localhost:4000/auth/login\",data:values};try{const response=await axios.request(options);localStorage.setItem(\"token\",response.data.token);console.log(response.data.token);displayMessage(\"success\",{message:\"Login Successful\"});setDashboardSelectedItem(\"Mobiles\");navigate(\"/dashboard\");}catch(error){displayMessage(\"error\",{message:\"Invalid credentials\"});}};useEffect(()=>{setDashboardSelectedItem(\"Mobiles\");},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[contextHolder,/*#__PURE__*/_jsx(\"section\",{className:\"bg-img\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"header\",{children:\"Sign in\"}),/*#__PURE__*/_jsxs(Form,{name:\"login\",\"aria-label\":\"login form\",onFinish:onFinish,layout:\"vertical\",requiredMark:\"optional\",children:[/*#__PURE__*/_jsx(Form.Item,{name:\"email\",label:\"Email\",rules:[{type:\"email\",required:true,message:\"Please input your Name!\"}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(MailOutlined,{}),placeholder:\"Email\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",label:\"Password\",rules:[{required:true,message:\"Please input your Password!\"}],children:/*#__PURE__*/_jsx(Input.Password,{prefix:/*#__PURE__*/_jsx(LockOutlined,{}),type:\"password\",placeholder:\"Password\"})}),/*#__PURE__*/_jsxs(Form.Item,{style:{marginBottom:\"0px\"},children:[/*#__PURE__*/_jsx(Button,{block:\"true\",type:\"primary\",htmlType:\"submit\",children:\"Log in\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{children:\"Don't have an account?\"}),\" \",/*#__PURE__*/_jsx(Link,{href:\"/register\",children:\"Sign up now\"})]})]})]})]})})]});};export default Login;","map":{"version":3,"names":["LockOutlined","MailOutlined","Button","Form","Input","Typography","message","axios","React","useContext","useEffect","useNavigate","DashboardContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Text","Link","Login","navigate","messageApi","contextHolder","useMessage","setDashboardSelectedItem","displayMessage","messageType","data","open","type","content","onFinish","values","console","log","options","method","url","response","request","localStorage","setItem","token","error","children","className","name","layout","requiredMark","Item","label","rules","required","prefix","placeholder","Password","style","marginBottom","block","htmlType","href"],"sources":["/home/pranjhi.singh/Desktop/MobileVista/mobile-app/src/components/User/LoginPage/Login.jsx"],"sourcesContent":["import { LockOutlined, MailOutlined } from \"@ant-design/icons\";\nimport { Button, Form,  Input, Typography, message} from \"antd\";\nimport axios from \"axios\";\nimport React, { useContext, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport './Login.css';\nimport { DashboardContext } from \"../../Dashboard/dashContext\";\nconst { Text, Link } = Typography;\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const [messageApi, contextHolder] = message.useMessage();\n\n  const { setDashboardSelectedItem } = useContext(DashboardContext);\n\n  const displayMessage = (messageType, data) => {\n    messageApi.open({\n      type: messageType,\n      content: data?.message,\n    });\n  };\n\n  const onFinish = async (values) => {\n    console.log(\"Received values of form: \", values);\n\n    const options = {\n      method: \"POST\",\n      url: \"http://localhost:4000/auth/login\",\n      data: values,\n    };\n\n    try {\n      const response = await axios.request(options);\n      localStorage.setItem(\"token\", response.data.token)\n      console.log(response.data.token);\n\n      displayMessage(\"success\", {message:\"Login Successful\"});\n      setDashboardSelectedItem(\"Mobiles\");\n      navigate(\"/dashboard\");\n    } catch (error) {\n      displayMessage(\"error\", {message: \"Invalid credentials\"});\n\n    }\n  };\n\n  useEffect(() => {\n    setDashboardSelectedItem(\"Mobiles\");\n  }, [])\n\n  return (\n    <>\n       {contextHolder}\n      <section className=\"bg-img\">\n        <div className=\"content\">\n          <header>Sign in</header>\n          <Form\n            name=\"login\"\n            aria-label=\"login form\"\n            onFinish={onFinish}\n            layout=\"vertical\"\n            requiredMark=\"optional\"\n          >\n            <Form.Item\n              name=\"email\"\n              label=\"Email\"\n              rules={[\n                {\n                  type: \"email\",\n                  required: true,\n                  message: \"Please input your Name!\",\n                },\n              ]}\n            >\n              <Input prefix={<MailOutlined />} placeholder=\"Email\" />\n            </Form.Item>\n            <Form.Item\n              name=\"password\"\n              label=\"Password\"\n              rules={[\n                {\n                  required: true,\n                  message: \"Please input your Password!\",\n                },\n              ]}\n            >\n              <Input.Password\n                prefix={<LockOutlined />}\n                type=\"password\"\n                placeholder=\"Password\"\n              />\n            </Form.Item>\n\n            <Form.Item style={{ marginBottom: \"0px\" }}>\n              <Button block=\"true\" type=\"primary\" htmlType=\"submit\">\n                Log in\n              </Button>\n              <div >\n                <Text >Don't have an account?</Text>{\" \"}\n                <Link href=\"/register\">Sign up now</Link>\n              </div>\n            </Form.Item>\n          </Form>\n        </div>\n      </section>\n    </>\n  );\n};\n\nexport default Login;\n"],"mappings":"AAAA,OAASA,YAAY,CAAEC,YAAY,KAAQ,mBAAmB,CAC9D,OAASC,MAAM,CAAEC,IAAI,CAAGC,KAAK,CAAEC,UAAU,CAAEC,OAAO,KAAO,MAAM,CAC/D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CACpD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,aAAa,CACpB,OAASC,gBAAgB,KAAQ,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAC/D,KAAM,CAAEC,IAAI,CAAEC,IAAK,CAAC,CAAGf,UAAU,CAEjC,KAAM,CAAAgB,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAAAC,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACY,UAAU,CAAEC,aAAa,CAAC,CAAGlB,OAAO,CAACmB,UAAU,CAAC,CAAC,CAExD,KAAM,CAAEC,wBAAyB,CAAC,CAAGjB,UAAU,CAACG,gBAAgB,CAAC,CAEjE,KAAM,CAAAe,cAAc,CAAGA,CAACC,WAAW,CAAEC,IAAI,GAAK,CAC5CN,UAAU,CAACO,IAAI,CAAC,CACdC,IAAI,CAAEH,WAAW,CACjBI,OAAO,CAAEH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEvB,OACjB,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAA2B,QAAQ,CAAG,KAAO,CAAAC,MAAM,EAAK,CACjCC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEF,MAAM,CAAC,CAEhD,KAAM,CAAAG,OAAO,CAAG,CACdC,MAAM,CAAE,MAAM,CACdC,GAAG,CAAE,kCAAkC,CACvCV,IAAI,CAAEK,MACR,CAAC,CAED,GAAI,CACF,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAAjC,KAAK,CAACkC,OAAO,CAACJ,OAAO,CAAC,CAC7CK,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEH,QAAQ,CAACX,IAAI,CAACe,KAAK,CAAC,CAClDT,OAAO,CAACC,GAAG,CAACI,QAAQ,CAACX,IAAI,CAACe,KAAK,CAAC,CAEhCjB,cAAc,CAAC,SAAS,CAAE,CAACrB,OAAO,CAAC,kBAAkB,CAAC,CAAC,CACvDoB,wBAAwB,CAAC,SAAS,CAAC,CACnCJ,QAAQ,CAAC,YAAY,CAAC,CACxB,CAAE,MAAOuB,KAAK,CAAE,CACdlB,cAAc,CAAC,OAAO,CAAE,CAACrB,OAAO,CAAE,qBAAqB,CAAC,CAAC,CAE3D,CACF,CAAC,CAEDI,SAAS,CAAC,IAAM,CACdgB,wBAAwB,CAAC,SAAS,CAAC,CACrC,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEV,KAAA,CAAAE,SAAA,EAAA4B,QAAA,EACItB,aAAa,cACfV,IAAA,YAASiC,SAAS,CAAC,QAAQ,CAAAD,QAAA,cACzB9B,KAAA,QAAK+B,SAAS,CAAC,SAAS,CAAAD,QAAA,eACtBhC,IAAA,WAAAgC,QAAA,CAAQ,SAAO,CAAQ,CAAC,cACxB9B,KAAA,CAACb,IAAI,EACH6C,IAAI,CAAC,OAAO,CACZ,aAAW,YAAY,CACvBf,QAAQ,CAAEA,QAAS,CACnBgB,MAAM,CAAC,UAAU,CACjBC,YAAY,CAAC,UAAU,CAAAJ,QAAA,eAEvBhC,IAAA,CAACX,IAAI,CAACgD,IAAI,EACRH,IAAI,CAAC,OAAO,CACZI,KAAK,CAAC,OAAO,CACbC,KAAK,CAAE,CACL,CACEtB,IAAI,CAAE,OAAO,CACbuB,QAAQ,CAAE,IAAI,CACdhD,OAAO,CAAE,yBACX,CAAC,CACD,CAAAwC,QAAA,cAEFhC,IAAA,CAACV,KAAK,EAACmD,MAAM,cAAEzC,IAAA,CAACb,YAAY,GAAE,CAAE,CAACuD,WAAW,CAAC,OAAO,CAAE,CAAC,CAC9C,CAAC,cACZ1C,IAAA,CAACX,IAAI,CAACgD,IAAI,EACRH,IAAI,CAAC,UAAU,CACfI,KAAK,CAAC,UAAU,CAChBC,KAAK,CAAE,CACL,CACEC,QAAQ,CAAE,IAAI,CACdhD,OAAO,CAAE,6BACX,CAAC,CACD,CAAAwC,QAAA,cAEFhC,IAAA,CAACV,KAAK,CAACqD,QAAQ,EACbF,MAAM,cAAEzC,IAAA,CAACd,YAAY,GAAE,CAAE,CACzB+B,IAAI,CAAC,UAAU,CACfyB,WAAW,CAAC,UAAU,CACvB,CAAC,CACO,CAAC,cAEZxC,KAAA,CAACb,IAAI,CAACgD,IAAI,EAACO,KAAK,CAAE,CAAEC,YAAY,CAAE,KAAM,CAAE,CAAAb,QAAA,eACxChC,IAAA,CAACZ,MAAM,EAAC0D,KAAK,CAAC,MAAM,CAAC7B,IAAI,CAAC,SAAS,CAAC8B,QAAQ,CAAC,QAAQ,CAAAf,QAAA,CAAC,QAEtD,CAAQ,CAAC,cACT9B,KAAA,QAAA8B,QAAA,eACEhC,IAAA,CAACK,IAAI,EAAA2B,QAAA,CAAE,wBAAsB,CAAM,CAAC,CAAC,GAAG,cACxChC,IAAA,CAACM,IAAI,EAAC0C,IAAI,CAAC,WAAW,CAAAhB,QAAA,CAAC,aAAW,CAAM,CAAC,EACtC,CAAC,EACG,CAAC,EACR,CAAC,EACJ,CAAC,CACC,CAAC,EACV,CAAC,CAEP,CAAC,CAED,cAAe,CAAAzB,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}